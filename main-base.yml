- hosts: all
  become: yes
  user: fibo
  gather_facts: no
  pre_tasks:
  - name: 'Update o Repo'
    raw: 'apt-get update'
  - name: 'Setup o Python'
    raw: 'apt-get install -y python'
  - name: Add mappings to /etc/hosts
    blockinfile:
      path: /etc/hosts
      block: |
        {{ item.ip }} {{ item.name }}
      marker: "# {mark} ANSIBLE MANAGED BLOCK {{ item.name }}"
    loop:
      - { name: node1, ip: 10.2.103.10}
      - { name: node2, ip: 10.2.103.11}
      - { name: node3, ip: 10.2.103.12}
      - { name: haproxy, ip: 10.2.103.13}
